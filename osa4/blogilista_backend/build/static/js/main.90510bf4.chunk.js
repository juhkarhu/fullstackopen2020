(this.webpackJsonpblogilista_frontend=this.webpackJsonpblogilista_frontend||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var o=n(1),l=n(14),c=n.n(l),u=n(3),i=n(0),r=function(e){return Object(i.jsxs)("div",{children:["Search ",Object(i.jsx)("input",{onChange:e.onChange})]})},a=function(e){return Object(i.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(i.jsxs)("div",{children:["Title: ",Object(i.jsx)("input",{value:e.titleValue,onChange:e.onTitleChange})]}),Object(i.jsxs)("div",{children:["Author: ",Object(i.jsx)("input",{value:e.authorValue,onChange:e.onAuthorChange})]}),Object(i.jsxs)("div",{children:["Url: ",Object(i.jsx)("input",{value:e.urlValue,onChange:e.onUrlChange})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},s=function(e){var t=e.blog,n=e.toggleDelete,o=e.toggleLike;return Object(i.jsxs)("li",{className:"blog",children:[t.title," by ",t.author," with ",t.likes," likes",Object(i.jsx)("button",{onClick:o,children:"like"}),Object(i.jsx)("button",{onClick:n,children:"delete"})]},t.title)},j=n(4),b=n.n(j),h="api/blogs",d=function(){return b.a.get(h).then((function(e){return e.data}))},f=function(e){return console.log(e),b.a.post(h,e).then((function(e){return e.data}))},g=function(e){return b.a.delete(h+"/".concat(e)).then((function(e){return e.data}))},O=function(e,t){return b.a.put(h+"/".concat(e),t).then((function(e){return e.data}))},v=function(e){var t=e.message,n=e.className;return null===t?null:Object(i.jsx)("div",{className:n,children:t})},m=function(){var e=Object(o.useState)([]),t=Object(u.a)(e,2),n=t[0],l=t[1],c=Object(o.useState)(null),j=Object(u.a)(c,2),b=j[0],h=j[1],m=Object(o.useState)(""),x=Object(u.a)(m,2),p=x[0],C=x[1],k=Object(o.useState)(""),w=Object(u.a)(k,2),S=w[0],T=w[1],D=Object(o.useState)(""),y=Object(u.a)(D,2),L=y[0],B=y[1],V=Object(o.useState)(""),A=Object(u.a)(V,2),N=A[0],U=A[1],E=n.filter((function(e){return e.title.toLowerCase().includes(N.toLowerCase())})),I=Object(o.useState)(null),J=Object(u.a)(I,2),_=J[0],Y=J[1],q=Object(o.useCallback)((function(){d().then((function(e){l(e)}))}),[]);Object(o.useEffect)((function(){d().then((function(e){l(e)}))}),[]);return Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"Blogister v. 0.0.3.1"}),Object(i.jsx)(v,{message:b,className:_}),Object(i.jsx)(r,{onChange:function(e){e.preventDefault(),U(e.target.value.toLowerCase())}}),Object(i.jsx)("h2",{children:"Add a new blog to the list"}),Object(i.jsx)(a,{onSubmit:function(e){e.preventDefault();var t={title:p,author:S,url:L};console.log(t);var o=n.filter((function(e){return e.title.toLowerCase()===p.toLowerCase()}));console.log("t\xe4m\xe4 on hit",o[0]),o[0]?(console.log("jos hit[0] on truthy"),Y("error"),h("A blog by the name ".concat(o[0].title," is already on Blogister.")),setTimeout((function(){Y(null),h(null)}),2e3),C(""),T(""),B(""),U("")):f(t).then((function(e){l(n.concat(e)),C(""),T(""),B(""),U(""),Y("update"),h("".concat(t.title," was added to the Blogister-list")),setTimeout((function(){Y(null),h(null)}),2e3)})).catch((function(e){Y("error"),h("".concat(e.response.data.error)),setTimeout((function(){Y(null),h(null)}),3e3)}))},titleValue:p,onTitleChange:function(e){e.preventDefault(),C(e.target.value)},authorValue:S,onAuthorChange:function(e){e.preventDefault(),T(e.target.value)},urlValue:L,onUrlChange:function(e){e.preventDefault(),B(e.target.value)}}),Object(i.jsx)("h2",{children:"Blogs"}),Object(i.jsx)("ul",{children:E.map((function(e){return Object(i.jsx)(s,{blog:e,toggleLike:function(){return function(e){console.log("blog no "+e+" needs to be liked");var t=n.filter((function(t){return t.id===e}))[0],o={title:t.title,author:t.author,url:t.url,likes:t.likes+1};O(e,o).then((function(){q(),Y("update"),h("You liked ".concat(o.title,"!")),setTimeout((function(){Y(null),h(null)}),3e3)})).catch((function(e){console.log(e)}))}(e.id)},toggleDelete:function(){return function(e){console.log("blog no "+e+" needs to be deleted");var t=E.find((function(t){return t.id===e}));window.confirm("Delete ".concat(t.title," ?"))&&g(e).then((function(){q(),Y("delete"),h("".concat(t.title," was removed from the Blogister-list")),setTimeout((function(){Y(null),h(null)}),2e3)})).catch((function(e){q(),Y("delete"),h("Information of ".concat(t.title," has already been removed from the server.")),setTimeout((function(){Y(null),h(null)}),2e3)}))}(e.id)}},e.id)}))})]})};n(38);c.a.render(Object(i.jsx)(m,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.90510bf4.chunk.js.map