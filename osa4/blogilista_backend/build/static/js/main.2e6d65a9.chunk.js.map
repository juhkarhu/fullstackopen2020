{"version":3,"sources":["components/SearchForm.js","components/AddBlogForm.js","components/DisplayBlog.js","components/Notification.js","components/LoginForm.js","components/Togglable.js","services/login.js","services/contacts.js","App.js","index.js"],"names":["SearchForm","props","onChange","AddPersonForm","onSubmit","value","titleValue","onTitleChange","authorValue","onAuthorChange","urlValue","onUrlChange","type","DisplayBlog","blog","toggleDelete","toggleLike","className","title","author","likes","onClick","Notification","message","LoginForm","handleSubmit","onPasswordChange","onUsernameChange","username","password","Togglable","useState","visible","setVisible","hideWhenVisible","display","showWhenVisible","toggleVisibility","console","log","style","buttonLabel","children","exportedObject","login","credentials","a","axios","post","response","data","baseUrl","token","getAll","get","then","create","newObject","config","headers","Authorization","remove","id","delete","put","setToken","newToken","App","blogs","setBlogs","notificationMessage","setNotificationMessage","newTitle","setNewTitle","newAuthor","setNewAuthor","newUrl","setNewUrl","searchTerm","setSearchTerm","blogsToShow","filter","toLowerCase","includes","setClassName","setUsername","setPassword","user","setUser","fetchPosts","useCallback","contactService","returnedBlogs","useEffect","initialBlogs","loggedUserJSON","window","localStorage","getItem","JSON","parse","addBlog","event","preventDefault","blogObject","url","hit","setTimeout","concat","catch","error","handleTitleChange","target","handleAuthorChange","handleUrlChange","handleSearchTermChange","handleLogin","loginService","setItem","stringify","handleLogout","clear","name","AddBlogForm","map","likedBlog","find","person","confirm","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.2e6d65a9.chunk.js","sourcesContent":["import React from 'react'\n\n\nconst SearchForm = (props) => (\n    <div>\n        Search <input onChange={props.onChange} />\n    </div>\n)\n\nexport default SearchForm","import React from 'react'\n\n\nconst AddPersonForm = (props) => (\n    <form onSubmit={props.onSubmit}>\n        <div>\n            Title: <input value={props.titleValue} onChange={props.onTitleChange} />\n        </div>\n        <div>\n            Author: <input value={props.authorValue} onChange={props.onAuthorChange} />\n        </div>\n        <div>\n            Url: <input value={props.urlValue} onChange={props.onUrlChange} />\n        </div>\n        <div>\n            <button type=\"submit\">add</button>\n        </div>\n    </form>\n)\n\nexport default AddPersonForm","import React from 'react'\n\nconst DisplayBlog = ({ blog, toggleDelete, toggleLike }) => {\n    // console.log('displayblogissa', blog)\n\t// console.log('blog', blog)\n    return (\n        <li className='blog' key={blog.title}>\n            {blog.title} by {blog.author} with {blog.likes} likes\n\t\t\t<button onClick={toggleLike}>like</button>\n            <button onClick={toggleDelete}>delete</button>\n        </li>\n    )\n\n}\n\n\nexport default DisplayBlog","const Notification = ({message, className}) => {\n    if (message === null) {\n        return null\n    }\n\n    return (\n        <div className={className}>\n            {message}\n        </div>\n    )\n}\n\n\nexport default Notification","import React from 'react'\n\nconst LoginForm = ({\n  handleSubmit,\n  onPasswordChange,\n  onUsernameChange,\n  username,\n  password\n}) => {\n  return (\n    <div>\n      <h2>Login</h2>\n\n\n      <form onSubmit={handleSubmit}>\n        <div>\n          username\n          <input\n            value={username}\n            onChange={onUsernameChange}\n          />\n        </div>\n        <div>\n          password\n          <input\n            type=\"password\"\n            value={password}\n            onChange={onPasswordChange}\n          />\n        </div>\n        <button type=\"submit\">login</button>\n      </form>\n\n    </div>\n  )\n}\n\n\nexport default LoginForm","import React, { useState } from 'react'\n\nconst Togglable = (props) => {\n  const [visible, setVisible] = useState(false)\n\n  const hideWhenVisible = { display: visible ? 'none' : '' }\n  const showWhenVisible = { display: visible ? '' : 'none' }\n\n  const toggleVisibility = () => {\n    setVisible(!visible)\n  }\n  console.log('togglablessa')\n\n  return (\n    <div>\n      <div style={hideWhenVisible}>\n        <button onClick={toggleVisibility}>{props.buttonLabel}</button>\n      </div>\n      <div style={showWhenVisible}>\n        {props.children}\n        <button onClick={toggleVisibility}>cancel</button>\n      </div>\n    </div>\n  )\n}\n\nexport default Togglable","import axios from 'axios'\nconst baseUrl = '/api/login' \n\nconst login = async credentials => {\n  const response = await axios.post(baseUrl, credentials)\n  return response.data\n}\n\nconst exportedObject = { login }\n\nexport default exportedObject","import axios from 'axios'\n// const baseUrl = 'http://localhost:3001/persons'\nconst baseUrl = 'api/blogs'\n\nlet token = null\n\nconst setToken = newToken => {\n  token = `bearer ${newToken}`\n}\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = async newObject => {\n  const config = {\n    headers: { Authorization: token},\n  }\n\n  // vanhat:\n  // console.log(newObject)\n  // const request = axios.post(baseUrl, newObject)\n  // return request.then(response => response.data)\n  \n  //uusi:\n  const response = await axios.post(baseUrl, newObject, config)\n  return response.data\n}\n\n// const update = (id, newObject) => {\n//   const request = axios.put(`${baseUrl}/${id}`, newObject)\n//   return request.then(response => response.data)\n// }\n\nconst remove = (id) => {\n  console.log('tassa', id)\n  const request = axios.delete(baseUrl + `/${id}`)\n  return request.then(response => response.data)\n}\n\nconst put = (id, blog) => {\n//   console.log('puttia koittamassa')\n//   console.log('putissa saatu id:', id, 'ja blog:', blog)\n\n  const request = axios.put(baseUrl + `/${id}`, blog)\n  return request.then(response => response.data)\n}\n\n// eslint-disable-next-line import/no-anonymous-default-export\nexport default { getAll, create, remove, put, setToken }","import React, { useState, useEffect, useCallback } from 'react'\nimport SearchForm from './components/SearchForm'\nimport AddBlogForm from './components/AddBlogForm'\nimport DisplayBlog from './components/DisplayBlog'\nimport Notification from './components/Notification'\nimport LoginForm from './components/LoginForm'\n\nimport Togglable from './components/Togglable'\n\nimport loginService from './services/login'\nimport contactService from './services/contacts'\n\n\nconst App = () => {\n\n\tconst [blogs, setBlogs] = useState([])\n\tconst [notificationMessage, setNotificationMessage] = useState(null)\n\n\tconst [newTitle, setNewTitle] = useState('')\n\tconst [newAuthor, setNewAuthor] = useState('')\n\tconst [newUrl, setNewUrl] = useState('')\n\n\tconst [searchTerm, setSearchTerm] = useState('')\n\tconst blogsToShow = blogs.filter(blog => blog.title.toLowerCase().includes(searchTerm.toLowerCase()))\n\tconst [className, setClassName] = useState(null)\n\n\tconst [username, setUsername] = useState('')\n\tconst [password, setPassword] = useState('')\n\n\tconst [user, setUser] = useState(null)\n\n\t// const [loginVisible, setLoginVisible] = useState(false)\n\n\n\tconst fetchPosts = useCallback(() => {\n\t\tcontactService\n\t\t\t.getAll()\n\t\t\t.then(returnedBlogs => {\n\t\t\t\tsetBlogs(returnedBlogs)\n\t\t\t})\n\t}, [])\n\n\n\tuseEffect(() => {\n\t\tcontactService\n\t\t\t.getAll()\n\t\t\t.then(initialBlogs => {\n\t\t\t\tsetBlogs(initialBlogs)\n\t\t\t})\n\t}, [])\n\n\tuseEffect(() => {\n\t\tconst loggedUserJSON = window.localStorage.getItem('loggedBlogAppUser')\n\t\tif (loggedUserJSON) {\n\t\t\tconst user = JSON.parse(loggedUserJSON)\n\t\t\tsetUser(user)\n\t\t\tcontactService.setToken(user.token)\n\t\t}\n\t}, [])\n\n\tconst addBlog = (event) => {\n\t\tevent.preventDefault()\n\t\tconst blogObject = {\n\t\t\ttitle: newTitle,\n\t\t\tauthor: newAuthor,\n\t\t\turl: newUrl\n\t\t}\n\t\tconsole.log(blogObject)\n\n\t\t// Tässä voisi tutkia onko listassa jo saman nimista blogia. \n\t\tconst hit = blogs.filter(blog => blog.title.toLowerCase() === newTitle.toLowerCase())\n\n\t\t// console.log('tämä on hit', hit[0])\n\n\t\tif (hit[0]) {\n\t\t\t// console.log('jos hit[0] on truthy')\n\t\t\tsetClassName('error')\n\t\t\tsetNotificationMessage(\n\t\t\t\t`A blog by the name ${hit[0].title} is already on Blogister.`\n\t\t\t)\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetClassName(null)\n\t\t\t\tsetNotificationMessage(null)\n\t\t\t}, 2000)\n\t\t\tsetNewTitle('')\n\t\t\tsetNewAuthor('')\n\t\t\tsetNewUrl('')\n\t\t\tsetSearchTerm('')\n\t\t\t// hit = null\n\t\t} else {\n\t\t\tcontactService\n\t\t\t\t.create(blogObject)\n\t\t\t\t.then(returnedBlogs => {\n\t\t\t\t\tsetBlogs(blogs.concat(returnedBlogs))\n\t\t\t\t\tsetNewTitle('')\n\t\t\t\t\tsetNewAuthor('')\n\t\t\t\t\tsetNewUrl('')\n\t\t\t\t\tsetSearchTerm('')\n\t\t\t\t\tsetClassName('update')\n\t\t\t\t\tsetNotificationMessage(\n\t\t\t\t\t\t`${blogObject.title} was added to the Blogister-list`\n\t\t\t\t\t)\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tsetClassName(null)\n\t\t\t\t\t\tsetNotificationMessage(null)\n\t\t\t\t\t}, 2000)\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tsetClassName('error')\n\t\t\t\t\tsetNotificationMessage(\n\t\t\t\t\t\t`${error.response.data.error}`\n\t\t\t\t\t)\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tsetClassName(null)\n\t\t\t\t\t\tsetNotificationMessage(null)\n\t\t\t\t\t}, 3000)\n\t\t\t\t})\n\t\t}\n\t}\n\n\tconst toggleLike = (id) => {\n\t\t// console.log('blog no ' + id + ' needs to be liked')\n\t\tconst hits = blogs.filter(blog => blog.id === id)\n\t\tconst likedBlog = hits[0]\n\n\t\tconst blogObject = {\n\t\t\ttitle: likedBlog.title,\n\t\t\tauthor: likedBlog.author,\n\t\t\turl: likedBlog.url,\n\t\t\tlikes: likedBlog.likes + 1\n\t\t}\n\t\tcontactService\n\t\t\t.put(id, blogObject)\n\t\t\t.then(() => {\n\t\t\t\tfetchPosts()\n\t\t\t\tsetClassName('update')\n\t\t\t\tsetNotificationMessage(\n\t\t\t\t\t`You liked ${blogObject.title}!`\n\t\t\t\t)\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tsetClassName(null)\n\t\t\t\t\tsetNotificationMessage(null)\n\t\t\t\t}, 3000)\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tconsole.log(error)\n\t\t\t})\n\n\t}\n\n\n\tconst toggleDelete = (id) => {\n\t\tconsole.log('blog no ' + id + ' needs to be deleted')\n\t\tconst blog = blogsToShow.find(person => person.id === id)\n\t\tif (window.confirm(`Delete ${blog.title} ?`)) {\n\t\t\tcontactService\n\t\t\t\t.remove(id)\n\t\t\t\t.then(() => {\n\t\t\t\t\tfetchPosts()\n\t\t\t\t\tsetClassName('delete')\n\t\t\t\t\tsetNotificationMessage(\n\t\t\t\t\t\t`${blog.title} was removed from the Blogister-list`\n\t\t\t\t\t)\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tsetClassName(null)\n\t\t\t\t\t\tsetNotificationMessage(null)\n\t\t\t\t\t}, 2000)\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tfetchPosts()\n\t\t\t\t\tsetClassName('delete')\n\t\t\t\t\tsetNotificationMessage(\n\t\t\t\t\t\t`Information of ${blog.title} has already been removed from the server.`\n\t\t\t\t\t)\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tsetClassName(null)\n\t\t\t\t\t\tsetNotificationMessage(null)\n\t\t\t\t\t}, 2000)\n\t\t\t\t})\n\n\t\t}\n\t}\n\n\tconst handleTitleChange = (event) => {\n\t\tevent.preventDefault()\n\t\tsetNewTitle(event.target.value)\n\t}\n\n\tconst handleAuthorChange = (event) => {\n\t\tevent.preventDefault()\n\t\tsetNewAuthor(event.target.value)\n\t}\n\n\tconst handleUrlChange = (event) => {\n\t\tevent.preventDefault()\n\t\tsetNewUrl(event.target.value)\n\t}\n\n\tconst handleSearchTermChange = (event) => {\n\t\tevent.preventDefault()\n\t\tsetSearchTerm(event.target.value.toLowerCase())\n\t}\n\n\tconst handleLogin = async (event) => {\n\t\tevent.preventDefault()\n\t\t//console.log('logging in with', username, password)\n\t\ttry {\n\t\t\tconst user = await loginService.login({\n\t\t\t\tusername, password\n\t\t\t})\n\t\t\twindow.localStorage.setItem(\n\t\t\t\t'loggedBlogAppUser', JSON.stringify(user)\n\t\t\t)\n\t\t\tcontactService.setToken(user.token)\n\t\t\tsetUser(user)\n\t\t\tsetUsername('')\n\t\t\tsetPassword('')\n\t\t} catch (exception) {\n\t\t\tsetClassName('delete')\n\t\t\tsetNotificationMessage('wrong username or password')\n\t\t\tsetTimeout(() => {\n\t\t\t\tsetClassName(null)\n\t\t\t\tsetNotificationMessage(null)\n\t\t\t}, 5000)\n\t\t}\n\t}\n\n\tconst handleLogout = async (event) => {\n\t\tevent.preventDefault()\n\t\tconsole.log('logging out with the username', username)\n\t\tlocalStorage.clear()\n\t\tsetClassName('update')\n\t\tsetNotificationMessage('Logged out')\n\t\tsetTimeout(() => {\n\t\t\tsetClassName(null)\n\t\t\tsetNotificationMessage(null)\n\t\t}, 5000)\n\n\t}\n\n\t// These are done directly in const loginForm\n\t// const handleUsernameChange = (event) => {\n\t// \tevent.preventDefault()\n\t// \tsetUsername(event.target.value)\n\t// }\n\n\t// const handlePasswordChange = (event) => {\n\t// \tevent.preventDefault()\n\t// \tsetPassword(event.target.value)\n\t// }\n\n\tconst loginForm = () => (\n\t\t<Togglable buttonLabel='log in'>\n\t\t\t<LoginForm\n\t\t\t\tusername={username}\n\t\t\t\tpassword={password}\n\t\t\t\tonUsernameChange={({ target }) => setUsername(target.value)}\n\t\t\t\tonPasswordChange={({ target }) => setPassword(target.value)}\n\t\t\t\thandleSubmit={handleLogin}\n\t\t\t/>\n\t\t</Togglable>\n\t)\n\n\tconst blogForm = () => {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<SearchForm onChange={handleSearchTermChange} />\n\t\t\t\t<h2>Add a new blog to the list</h2>\n\n\t\t\t\t<Togglable buttonLabel='new blog'>\n\t\t\t\t\t<AddBlogForm\n\t\t\t\t\t\tonSubmit={addBlog}\n\t\t\t\t\t\ttitleValue={newTitle}\n\t\t\t\t\t\tonTitleChange={handleTitleChange}\n\t\t\t\t\t\tauthorValue={newAuthor}\n\t\t\t\t\t\tonAuthorChange={handleAuthorChange}\n\t\t\t\t\t\turlValue={newUrl}\n\t\t\t\t\t\tonUrlChange={handleUrlChange}\n\t\t\t\t\t/>\n\t\t\t\t</Togglable>\n\n\t\t\t\t<h2>Blogs</h2>\n\t\t\t\t<ul>\n\t\t\t\t\t{blogsToShow.map(blog => (\n\t\t\t\t\t\t<DisplayBlog\n\t\t\t\t\t\t\tkey={blog.id}\n\t\t\t\t\t\t\tblog={blog}\n\t\t\t\t\t\t\ttoggleLike={() => toggleLike(blog.id)}\n\t\t\t\t\t\t\ttoggleDelete={() => toggleDelete(blog.id)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t</div>\n\n\t\t)\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<h1>Blogister v. 0.0.3.7.2</h1>\n\n\t\t\t{user === null ?\n\t\t\t\tloginForm() :\n\t\t\t\t<div>\n\t\t\t\t\t<p>Logged in as: {user.name} <button onClick={handleLogout}>logout</button></p>\n\t\t\t\t\t{blogForm()}\n\t\t\t\t</div>\n\t\t\t}\n\n\t\t\t<Notification message={notificationMessage} className={className} />\n\n\t\t</div>\n\t)\n\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n) "],"sourceRoot":""}